(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{7185:function(e,a,s){Promise.resolve().then(s.bind(s,5508))},5508:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return CarrinhoPage}});var t=s(7437),n=s(2265),i=s(7827),r=s(5373),o=s(2458),l=s(1012),c=s(4033),d=s(5925);function CarrinhoPage(){let{items:e,updateQuantity:a,removeFromCart:s,totalPrice:x}=(0,r.j)(),[m,h]=(0,n.useState)(1),[u,p]=(0,n.useState)({street:"",number:"",complement:"",neighborhood:"",city:"S\xe3o Paulo",zipCode:""}),[j,g]=(0,n.useState)(!1),b=(0,c.useRouter)(),v=x+8.9,handleNextStep=()=>{if(1===m&&0===e.length){d.ZP.error("Adicione itens ao carrinho primeiro!");return}if(2===m&&(!u.street||!u.number||!u.neighborhood||!u.zipCode)){d.ZP.error("Preencha todos os campos obrigat\xf3rios do endere\xe7o");return}m<3?h(m+1):b.push("/checkout")};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-coxinha-light to-orange-50",children:[(0,t.jsx)(i.h,{cartItemsCount:e.length}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)(l.S,{children:(0,t.jsx)(GlassCard,{className:"mb-8",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:[{number:1,label:"Carrinho"},{number:2,label:"Endere\xe7o"},{number:3,label:"Pagamento"}].map(e=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:cn("w-8 h-8 rounded-full flex items-center justify-center font-bold",m>=e.number?"bg-coxinha-primary text-white":"bg-gray-200 text-gray-500"),children:e.number}),(0,t.jsx)("span",{className:cn("ml-2 font-medium",m>=e.number?"text-coxinha-dark":"text-gray-500"),children:e.label}),e.number<3&&(0,t.jsx)("div",{className:"w-8 h-0.5 bg-gray-300 mx-4"})]},e.number))})})}),(0,t.jsxs)(AnimatePresence,{mode:"wait",children:[1===m&&(0,t.jsxs)(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,t.jsxs)(GlassCard,{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-coxinha-dark mb-6",children:"Seu Carrinho"}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Seu carrinho est\xe1 vazio!"}),(0,t.jsx)(GlassButton,{variant:"secondary",onClick:()=>window.location.href="/",children:"Ver Produtos"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 glass-card",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-coxinha-dark",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantidade: ",e.quantity]})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"font-bold text-coxinha-primary",children:["R$ ",(e.price*e.quantity).toFixed(2).replace(".",",")]})})]},e.id)),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Subtotal:"}),(0,t.jsxs)("span",{children:["R$ ",x.toFixed(2).replace(".",",")]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Taxa de entrega:"}),(0,t.jsxs)("span",{children:["R$ ","8.90".replace(".",",")]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsxs)("span",{className:"text-coxinha-primary",children:["R$ ",(0,t.jsx)(NumberTicker,{value:parseFloat(v.toFixed(2))})]})]})]})]})]}),e.length>0&&(0,t.jsx)(o.a,{onClick:handleNextStep,className:"w-full",children:"Continuar para Endere\xe7o →"})]},"carrinho"),2===m&&(0,t.jsxs)(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,t.jsxs)(GlassCard,{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-coxinha-dark",children:"Endere\xe7o de Entrega"}),(0,t.jsx)(o.a,{variant:"secondary",size:"sm",onClick:()=>{g(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{setTimeout(()=>{p({street:"Rua Exemplo",number:"123",complement:"",neighborhood:"Centro",city:"S\xe3o Paulo",zipCode:"01000-000"}),g(!1),d.ZP.success("Endere\xe7o encontrado!")},2e3)},e=>{g(!1),d.ZP.error("N\xe3o foi poss\xedvel obter sua localiza\xe7\xe3o")}):(g(!1),d.ZP.error("Geolocaliza\xe7\xe3o n\xe3o suportada"))},disabled:j,children:j?"\uD83D\uDCCD Buscando...":"\uD83D\uDCCD Usar minha localiza\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(GlassInput,{placeholder:"Rua",value:u.street,onChange:e=>p({...u,street:e.target.value}),required:!0}),(0,t.jsx)(GlassInput,{placeholder:"N\xfamero",value:u.number,onChange:e=>p({...u,number:e.target.value}),required:!0}),(0,t.jsx)(GlassInput,{placeholder:"Complemento (opcional)",value:u.complement,onChange:e=>p({...u,complement:e.target.value})}),(0,t.jsx)(GlassInput,{placeholder:"Bairro",value:u.neighborhood,onChange:e=>p({...u,neighborhood:e.target.value}),required:!0}),(0,t.jsx)(GlassInput,{placeholder:"Cidade",value:u.city,onChange:e=>p({...u,city:e.target.value}),required:!0}),(0,t.jsx)(GlassInput,{placeholder:"CEP",value:u.zipCode,onChange:e=>p({...u,zipCode:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(o.a,{variant:"secondary",onClick:()=>h(m-1),className:"flex-1",children:"← Voltar"}),(0,t.jsx)(o.a,{onClick:handleNextStep,className:"flex-1",children:"Continuar para Pagamento →"})]})]},"endereco"),3===m&&(0,t.jsxs)(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,t.jsx)(PixPayment,{total:v,orderId:"12345",onPaymentComplete:()=>{d.ZP.success("Pedido realizado com sucesso!");let a="CX"+Date.now().toString().slice(-6),s={id:a,items:e,total:v,address:u,status:{status:"confirmed",estimatedTime:30,lastUpdate:new Date}};localStorage.setItem("activeOrder",JSON.stringify(s)),window.dispatchEvent(new Event("storage")),setTimeout(()=>{window.location.href="/acompanhamento"},2e3)}}),(0,t.jsx)("div",{className:"flex space-x-4 mt-6",children:(0,t.jsx)(GlassButton,{variant:"secondary",onClick:()=>h(m-1),className:"flex-1",children:"← Voltar"})})]},"pagamento")]})]})]})}}},function(e){e.O(0,[216,592,744],function(){return e(e.s=7185)}),_N_E=e.O()}]);